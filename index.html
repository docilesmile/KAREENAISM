<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KAREENAISM Task Spinner</title>
<style>
    body { font-family: Arial, sans-serif; text-align: center; margin: 50px; background: #f5f5f5; }
    #taskList { font-size: 1.1em; margin: 20px; text-align: left; display: inline-block; }
    .taskItem { margin-bottom: 10px; }
    .completed { text-decoration: line-through; color: #999; }
    button { padding: 10px 20px; font-size: 1em; margin: 5px; }
    .disabled { background: #ccc; color: #666; cursor: not-allowed; }
</style>
</head>
<body>

<h1>KAREENAISM Task Spinner</h1>
<div id="task">Loading tasks...</div>
<button id="nextTask" class="disabled" disabled>Get Task</button>
<button id="releaseBtn" class="disabled" disabled>Beg for Release</button>
<p id="message"></p>

<script>
const jsonURL = "gistfile1.json"; // your GitHub Pages URL
let tasks = [];
let completedTasks = [];

async function loadTasks() {
    try {
        const response = await fetch(jsonURL);
        if (!response.ok) throw new Error("Network response was not ok");
        tasks = await response.json();
        document.getElementById('task').textContent = "Tasks loaded! Click 'Get Task' to start.";
        document.getElementById('nextTask').disabled = false;
        document.getElementById('nextTask').classList.remove('disabled');
    } catch (error) {
        document.getElementById('task').textContent = "Error loading tasks. Check your URL and console.";
        console.error("Error fetching tasks:", error);
    }
}

function getRandomTask() {
    if (tasks.length === 0) {
        document.getElementById('message').textContent = "No more tasks available.";
        return;
    }

    const index = Math.floor(Math.random() * tasks.length);
    const task = tasks[index];
    completedTasks.push({ text: task, done: false });
    tasks.splice(index, 1); // remove from available tasks

    // Create a new task element with checkbox
    const taskDiv = document.createElement('div');
    taskDiv.className = 'taskItem';

    const checkbox = document.createElement('input');
    checkbox.type = 'checkbox';
    checkbox.id = `task_${completedTasks.length - 1}`;

    const label = document.createElement('label');
    label.htmlFor = checkbox.id;
    label.textContent = task;

    // Checkbox listener: mark complete + style + check release
    checkbox.addEventListener('change', function() {
        if (this.checked) {
            label.classList.add('completed'); // line-through + faded color
            completedTasks[completedTasks.length - 1].done = true;
        } else {
            label.classList.remove('completed');
            completedTasks[completedTasks.length - 1].done = false;
        }
        checkCompletion();
    });

    taskDiv.appendChild(checkbox);
    taskDiv.appendChild(label);
    document.getElementById('taskList').appendChild(taskDiv);
}


document.getElementById('nextTask').addEventListener('click', getRandomTask);
document.getElementById('releaseBtn').addEventListener('click', () => {
    alert("Begging for release! Remember, you can only release after completing the tasks.");
});

loadTasks();
</script>

</body>
</html>



